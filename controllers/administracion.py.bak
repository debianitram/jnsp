def novedades():
    page_novedades = db(Pagina.nombre == 'novedades').select(Pagina.id).first().id
    query = Noticia.pagina_id == page_novedades
    
    if 'new' in request.args:
        Noticia.pagina_id.default = page_novedades
        Noticia.pagina_id.readable = Noticia.pagina_id.writable = False
        
    if 'view' in request.args:
        Noticia.cuerpo.represent = lambda r, v: XML(v)
        
    fields = [Noticia.titulo, Noticia.created_on]
    
    formgrid = SQLFORM.grid(query)
    return dict(formgrid=formgrid)
